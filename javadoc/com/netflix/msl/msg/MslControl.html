<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Fri Jul 04 10:32:59 PDT 2014 -->
<TITLE>
MslControl (Message Security Layer Public API)
</TITLE>

<META NAME="date" CONTENT="2014-07-04">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MslControl (Message Security Layer Public API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MslControl.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
Message Security Layer (MSL)</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/netflix/msl/msg/MessageServiceTokenBuilder.html" title="class in com.netflix.msl.msg"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/netflix/msl/msg/MslControl.ApplicationError.html" title="enum in com.netflix.msl.msg"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/netflix/msl/msg/MslControl.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MslControl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.netflix.msl.msg</FONT>
<BR>
Class MslControl</H2>
<PRE>
<A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>com.netflix.msl.msg.MslControl</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>MslControl</B><DT>extends <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
<p>Message Security Layer control provides the base operational MSL logic of
 sending and receiving messages with an optional thread pool. An application
 should only use one instance of <code>MslControl</code> for all MSL
 communication. This class is thread-safe.</p>
 
 <p>This class provides methods for sending and receiving messages for all
 types of entities in both trusted network and peer-to-peer network types.
 Refer to the documentation for each method to determine which methods should
 be used based on the entity's role and network type.</p>
 
 <h3>Error Handling</h3>
 
 <dl>
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#FAIL"><CODE>MslConstants.ResponseCode.FAIL</CODE></A></dt>
  <dd>The caller is notified of the failure.</dd>
  
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#TRANSIENT_FAILURE"><CODE>MslConstants.ResponseCode.TRANSIENT_FAILURE</CODE></A></dt>
  <dd>The caller is notified of the failure. MSL will not automatically
      retry.</dd>
      
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#ENTITY_REAUTH"><CODE>MslConstants.ResponseCode.ENTITY_REAUTH</CODE></A></dt>
  <dd>MSL will attempt to resend the message using the entity authentication
      data. The previous master token and master token-bound service tokens
      will be discarded if successful.</dd>
  
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#USER_REAUTH"><CODE>MslConstants.ResponseCode.USER_REAUTH</CODE></A></dt>
  <dd>MSL will attempt to resend the message using the user authentication
      data if made available by the message context. Otherwise request fails.
      The previous user ID token-bound service tokens will be discarded if
      successful.</dd>
      
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#KEYX_REQUIRED"><CODE>MslConstants.ResponseCode.KEYX_REQUIRED</CODE></A></dt>
  <dd>MSL will attempt to perform key exchange to establish session keys and
      then resend the message.</dd>
  
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#ENTITYDATA_REAUTH"><CODE>MslConstants.ResponseCode.ENTITYDATA_REAUTH</CODE></A></dt>
  <dd>MSL will attempt to resend the message using new entity authentication
      data. The previous master token and master token-bound service tokens
      will be discarded if successful.</dd>
  
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#USERDATA_REAUTH"><CODE>MslConstants.ResponseCode.USERDATA_REAUTH</CODE></A></dt>
  <dd>MSL will attempt to resend the message using new user authentication
      data if made available by the message context. Otherwise request fails.
      The previous user ID token-bound service tokens will be discarded if
      successful.</dd>
      
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#EXPIRED"><CODE>MslConstants.ResponseCode.EXPIRED</CODE></A></dt>
  <dd>MSL will attempt to resend the message with the renewable flag set or
      after receiving a new master token.</dd>
  
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#REPLAYED"><CODE>MslConstants.ResponseCode.REPLAYED</CODE></A></dt>
  <dd>MSL will attempt to resend the message after renewing the master token
      or receiving a new master token.</dd>
  
  <dt><A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#SSOTOKEN_REJECTED"><CODE>MslConstants.ResponseCode.SSOTOKEN_REJECTED</CODE></A></dt>
  <dd>Identical to <A HREF="../../../../com/netflix/msl/MslConstants.ResponseCode.html#USERDATA_REAUTH"><CODE>MslConstants.ResponseCode.USERDATA_REAUTH</CODE></A>.</dd>
 </dl>
 
 <h3>Anti-Replay</h3>
 
 <p>Requests marked as non-replayable will include a non-replayable ID.</p>
 
 <p>Responses must always reply with the message ID of the request
 incremented by 1. When the request message ID equals 2<sup>63</sup>-1 the
 response message ID must be 0. If the response message ID does not equal the
 expected value it is rejected and the caller is notified.</p>
 
 <h3>Renewal Synchronization</h3>
 
 <p>For a given MSL context there will be at most one renewable request with
 a master token and key request data in process. This prevents excessive
 master token renewal and potential renewal race conditions.</p>
 
 <p>Requests will be marked renewable if any of the following is true:
 <ul>
 <li>The master token renewal window has been entered.</li>
 <li>The user ID token renewal window has been entered.</li>
 <li>The application requests or requires establishment of session keys.</li>
 </ul>
 </p>
 
 <h3>MSL Handshake</h3>
 
 <p>Whenever requested or possible application data is encrypted and
 integrity-protected while in transit. If the MSL context entity
 authentication scheme does not support encryption or integrity protection
 when requested an initial handshake will be performed to establish session
 keys. This handshake occurs silently without the application's
 knowledge.</p>
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.ApplicationError.html" title="enum in com.netflix.msl.msg">MslControl.ApplicationError</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Application level errors that may translate into MSL level errors.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.DummyMessageRegistry.html" title="class in com.netflix.msl.msg">MslControl.DummyMessageRegistry</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A dummy error message registry that always returns null for the user
 message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.DummyMslContext.html" title="class in com.netflix.msl.msg">MslControl.DummyMslContext</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A dummy MSL context only used for our dummy
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#NULL_MASTER_TOKEN"><CODE>NULL_MASTER_TOKEN</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.ErrorResult.html" title="class in com.netflix.msl.msg">MslControl.ErrorResult</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The result of building an error response.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.ErrorService.html" title="class in com.netflix.msl.msg">MslControl.ErrorService</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This service sends an error response to the remote entity.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.FilterMessageContext.html" title="class in com.netflix.msl.msg">MslControl.FilterMessageContext</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base class for custom message contexts.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.KeyxResponseMessageContext.html" title="class in com.netflix.msl.msg">MslControl.KeyxResponseMessageContext</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This message context is used to send a handshake response.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.MslChannel.html" title="class in com.netflix.msl.msg">MslControl.MslChannel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg"><CODE>MessageInputStream</CODE></A> and <A HREF="../../../../com/netflix/msl/msg/MessageOutputStream.html" title="class in com.netflix.msl.msg"><CODE>MessageOutputStream</CODE></A> pair
 representing a single MSL communication channel established between
 the local and remote entities.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.ReceiveService.html" title="class in com.netflix.msl.msg">MslControl.ReceiveService</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This service receives a request from a remote entity, and either
 returns the received message or automatically generates a reply (and
 returns null).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.RequestService.html" title="class in com.netflix.msl.msg">MslControl.RequestService</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This service sends a request to the remote entity and returns the
 response.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.ResendMessageContext.html" title="class in com.netflix.msl.msg">MslControl.ResendMessageContext</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This message context is used to re-send a message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.RespondService.html" title="class in com.netflix.msl.msg">MslControl.RespondService</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This service sends a response to the remote entity.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.SendReceiveResult.html" title="class in com.netflix.msl.msg">MslControl.SendReceiveResult</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The result of sending and receiving messages.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.SendResult.html" title="class in com.netflix.msl.msg">MslControl.SendResult</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The result of sending a message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.SynchronousExecutor.html" title="class in com.netflix.msl.msg">MslControl.SynchronousExecutor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This class executes all tasks synchronously on the calling thread.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#executor">executor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MSL executor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/FilterStreamFactory.html" title="interface in com.netflix.msl.msg">FilterStreamFactory</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#filterFactory">filterFactory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Filter stream factory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentHashMap</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>,<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReadWriteLock</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#masterTokenLocks">masterTokenLocks</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map of in-flight master token in-flight read-write locks by MSL context.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#MAX_MESSAGES">MAX_MESSAGES</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The maximum number of MSL messages (requests sent or responses received)
 to allow before giving up.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/ErrorMessageRegistry.html" title="interface in com.netflix.msl.msg">ErrorMessageRegistry</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#messageRegistry">messageRegistry</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Error message registry.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#NULL_MASTER_TOKEN">NULL_MASTER_TOKEN</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dummy master token used to release the renewal lock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentHashMap</A>&lt;<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>,<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#renewingContexts">renewingContexts</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map tracking outstanding renewable messages by MSL context.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#MslControl(int)">MslControl</A></B>(int&nbsp;numThreads)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new instance of MSL control with the specified number of
 threads.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#MslControl(int, com.netflix.msl.msg.ErrorMessageRegistry)">MslControl</A></B>(int&nbsp;numThreads,
           <A HREF="../../../../com/netflix/msl/msg/ErrorMessageRegistry.html" title="interface in com.netflix.msl.msg">ErrorMessageRegistry</A>&nbsp;messageRegistry)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new instance of MSL control with the specified number of
 threads and user error message registry.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#acquireRenewalLock(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.util.concurrent.BlockingQueue, com.netflix.msl.msg.MessageBuilder, long)">acquireRenewalLock</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                   <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&gt;&nbsp;queue,
                   <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A>&nbsp;builder,
                   long&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempt to acquire the renewal lock if the message will need it using
 the given blocking queue.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/MslControl.ErrorResult.html" title="class in com.netflix.msl.msg">MslControl.ErrorResult</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#buildErrorResponse(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, com.netflix.msl.msg.MslControl.SendResult, com.netflix.msl.msg.ErrorHeader)">buildErrorResponse</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                   <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                   <A HREF="../../../../com/netflix/msl/msg/MslControl.SendResult.html" title="class in com.netflix.msl.msg">MslControl.SendResult</A>&nbsp;sent,
                   <A HREF="../../../../com/netflix/msl/msg/ErrorHeader.html" title="class in com.netflix.msl.msg">ErrorHeader</A>&nbsp;errorHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a message builder and message context appropriate for re-sending
 the original message in response to the received error.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#buildRequest(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext)">buildRequest</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
             <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new message builder that will craft a new message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#buildResponse(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, com.netflix.msl.msg.MessageHeader)">buildResponse</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
              <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
              <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;request)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new message builder that will craft a new message in
 response to another message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#cancelled(java.lang.Throwable)">cancelled</A></B>(<A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the current thread has been interrupted as indicated by
 the <code>Thread#isInterrupted()</code> method or the type of caught
 throwable.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#cleanupContext(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageHeader, com.netflix.msl.msg.ErrorHeader)">cleanupContext</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
               <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;requestHeader,
               <A HREF="../../../../com/netflix/msl/msg/ErrorHeader.html" title="class in com.netflix.msl.msg">ErrorHeader</A>&nbsp;errorHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called after successfully handling an error message to delete the old
 invalid crypto contexts and bound service tokens associated with the
 invalid master token or user ID token.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#deleteMasterToken(com.netflix.msl.util.MslContext, com.netflix.msl.tokens.MasterToken)">deleteMasterToken</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                  <A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&nbsp;masterToken)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes the provided master token from the MSL store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#error(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, com.netflix.msl.msg.MslControl.ApplicationError, java.io.OutputStream, com.netflix.msl.msg.MessageInputStream)">error</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
      <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
      <A HREF="../../../../com/netflix/msl/msg/MslControl.ApplicationError.html" title="enum in com.netflix.msl.msg">MslControl.ApplicationError</A>&nbsp;err,
      <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
      <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;request)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send an error response over the provided output stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#finalize()">finalize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#getIdentity(com.netflix.msl.msg.MessageInputStream)">getIdentity</A></B>(<A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;mis)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the provided message's entity identity from the master token or
 entity authentication data, if it can be determined.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#getNewestMasterToken(com.netflix.msl.util.MslContext)">getNewestMasterToken</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the newest master token from the MSL store and acquires the
 master token's read lock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, com.netflix.msl.msg.MessageHeader)">receive</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
        <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
        <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;request)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receive a message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)">receive</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
        <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
        int&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receive a request over the provided input stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#releaseMasterToken(com.netflix.msl.tokens.MasterToken)">releaseMasterToken</A></B>(<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&nbsp;masterToken)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release the read lock of the provided master token.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#releaseRenewalLock(com.netflix.msl.util.MslContext, java.util.concurrent.BlockingQueue, com.netflix.msl.msg.MessageInputStream)">releaseRenewalLock</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&gt;&nbsp;queue,
                   <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release the renewal lock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MslControl.MslChannel.html" title="class in com.netflix.msl.msg">MslControl.MslChannel</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#request(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)">request</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
        <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
        int&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a request to the remote entity over the provided output stream
 and receive a resposne over the provided input stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MslControl.MslChannel.html" title="class in com.netflix.msl.msg">MslControl.MslChannel</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#request(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.net.URL, int)">request</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
        <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</A>&nbsp;remoteEntity,
        int&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a request to the entity at the provided URL.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MslControl.MslChannel.html" title="class in com.netflix.msl.msg">MslControl.MslChannel</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#respond(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, com.netflix.msl.msg.MessageInputStream, int)">respond</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
        <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
        <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
        <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;request,
        int&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a response over the provided output stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/MslControl.SendResult.html" title="class in com.netflix.msl.msg">MslControl.SendResult</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#send(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.OutputStream, com.netflix.msl.msg.MessageBuilder, boolean)">send</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
     <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
     <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
     <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A>&nbsp;builder,
     boolean&nbsp;closeDestination)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../com/netflix/msl/msg/MslControl.SendReceiveResult.html" title="class in com.netflix.msl.msg">MslControl.SendReceiveResult</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#sendReceive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, com.netflix.msl.msg.MessageBuilder, boolean, boolean, int)">sendReceive</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
            <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
            <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
            <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
            <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A>&nbsp;builder,
            boolean&nbsp;receive,
            boolean&nbsp;closeStreams,
            int&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send the provided request and optionally receive a response from the
 remote entity.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#setFilterFactory(com.netflix.msl.msg.FilterStreamFactory)">setFilterFactory</A></B>(<A HREF="../../../../com/netflix/msl/msg/FilterStreamFactory.html" title="interface in com.netflix.msl.msg">FilterStreamFactory</A>&nbsp;factory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Assigns a filter stream factory that will be used to filter any incoming
 or outgoing messages.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#shutdown()">shutdown</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gracefully shutdown the MSL control instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#storeServiceTokens(com.netflix.msl.util.MslContext, com.netflix.msl.tokens.MasterToken, com.netflix.msl.tokens.UserIdToken, java.util.Set)">storeServiceTokens</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                   <A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&nbsp;masterToken,
                   <A HREF="../../../../com/netflix/msl/tokens/UserIdToken.html" title="class in com.netflix.msl.tokens">UserIdToken</A>&nbsp;userIdToken,
                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/ServiceToken.html" title="class in com.netflix.msl.tokens">ServiceToken</A>&gt;&nbsp;serviceTokens)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update the MSL store by removing any service tokens marked for deletion
 and adding/replacing any other service tokens contained in the message
 header.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#updateCryptoContexts(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageHeader, com.netflix.msl.keyx.KeyExchangeFactory.KeyExchangeData)">updateCryptoContexts</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                     <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;messageHeader,
                     <A HREF="../../../../com/netflix/msl/keyx/KeyExchangeFactory.KeyExchangeData.html" title="class in com.netflix.msl.keyx">KeyExchangeFactory.KeyExchangeData</A>&nbsp;keyExchangeData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update the MSL store crypto contexts with the crypto contexts of the
 message being sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/netflix/msl/msg/MslControl.html#updateCryptoContexts(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageHeader, com.netflix.msl.msg.MessageInputStream)">updateCryptoContexts</A></B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                     <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;request,
                     <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;response)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update the MSL store crypto contexts with the crypto contexts provided
 by received message.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="MAX_MESSAGES"><!-- --></A><H3>
MAX_MESSAGES</H3>
<PRE>
private static final int <B>MAX_MESSAGES</B></PRE>
<DL>
<DD>The maximum number of MSL messages (requests sent or responses received)
 to allow before giving up. Six exchanges, or twelve total messages,
 should be sufficient to capture all possible error recovery and
 handshake requirements in both trusted network and peer-to-peer modes.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.netflix.msl.msg.MslControl.MAX_MESSAGES">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="executor"><!-- --></A><H3>
executor</H3>
<PRE>
private final <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</A> <B>executor</B></PRE>
<DL>
<DD>MSL executor.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="messageRegistry"><!-- --></A><H3>
messageRegistry</H3>
<PRE>
private final <A HREF="../../../../com/netflix/msl/msg/ErrorMessageRegistry.html" title="interface in com.netflix.msl.msg">ErrorMessageRegistry</A> <B>messageRegistry</B></PRE>
<DL>
<DD>Error message registry.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="filterFactory"><!-- --></A><H3>
filterFactory</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/msg/FilterStreamFactory.html" title="interface in com.netflix.msl.msg">FilterStreamFactory</A> <B>filterFactory</B></PRE>
<DL>
<DD>Filter stream factory. May be null.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="renewingContexts"><!-- --></A><H3>
renewingContexts</H3>
<PRE>
private final <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentHashMap</A>&lt;<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>,<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&gt;&gt; <B>renewingContexts</B></PRE>
<DL>
<DD>Map tracking outstanding renewable messages by MSL context. The blocking
 queue is used to wait for a master token from a different thread if the
 message requires one.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="NULL_MASTER_TOKEN"><!-- --></A><H3>
NULL_MASTER_TOKEN</H3>
<PRE>
private final <A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A> <B>NULL_MASTER_TOKEN</B></PRE>
<DL>
<DD>Dummy master token used to release the renewal lock.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="masterTokenLocks"><!-- --></A><H3>
masterTokenLocks</H3>
<PRE>
private final <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentHashMap</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>,<A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReadWriteLock</A>&gt; <B>masterTokenLocks</B></PRE>
<DL>
<DD>Map of in-flight master token in-flight read-write locks by MSL context.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="MslControl(int)"><!-- --></A><H3>
MslControl</H3>
<PRE>
public <B>MslControl</B>(int&nbsp;numThreads)</PRE>
<DL>
<DD>Create a new instance of MSL control with the specified number of
 threads. A thread count of zero will cause all operations to execute on
 the calling thread.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>numThreads</CODE> - number of worker threads to create.</DL>
</DL>
<HR>

<A NAME="MslControl(int, com.netflix.msl.msg.ErrorMessageRegistry)"><!-- --></A><H3>
MslControl</H3>
<PRE>
public <B>MslControl</B>(int&nbsp;numThreads,
                  <A HREF="../../../../com/netflix/msl/msg/ErrorMessageRegistry.html" title="interface in com.netflix.msl.msg">ErrorMessageRegistry</A>&nbsp;messageRegistry)</PRE>
<DL>
<DD>Create a new instance of MSL control with the specified number of
 threads and user error message registry. A thread count of zero will
 cause all operations to execute on the calling thread.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>numThreads</CODE> - number of worker threads to create.<DD><CODE>messageRegistry</CODE> - error message registry.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="cancelled(java.lang.Throwable)"><!-- --></A><H3>
cancelled</H3>
<PRE>
protected static boolean <B>cancelled</B>(<A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</A>&nbsp;t)</PRE>
<DL>
<DD>Returns true if the current thread has been interrupted as indicated by
 the <code>Thread#isInterrupted()</code> method or the type of caught
 throwable.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>t</CODE> - caught throwable. May be null.
<DT><B>Returns:</B><DD>true if this thread was interrupted or the exception indicates
         an operation was interrupted.</DL>
</DD>
</DL>
<HR>

<A NAME="getIdentity(com.netflix.msl.msg.MessageInputStream)"><!-- --></A><H3>
getIdentity</H3>
<PRE>
private static <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getIdentity</B>(<A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;mis)
                           throws <A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A></PRE>
<DL>
<DD>Returns the provided message's entity identity from the master token or
 entity authentication data, if it can be determined.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>mis</CODE> - the message input stream.
<DT><B>Returns:</B><DD>the message header's entity identity or null if unknown.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A></CODE> - if there is a crypto error accessing the
         entity identity.</DL>
</DD>
</DL>
<HR>

<A NAME="setFilterFactory(com.netflix.msl.msg.FilterStreamFactory)"><!-- --></A><H3>
setFilterFactory</H3>
<PRE>
public void <B>setFilterFactory</B>(<A HREF="../../../../com/netflix/msl/msg/FilterStreamFactory.html" title="interface in com.netflix.msl.msg">FilterStreamFactory</A>&nbsp;factory)</PRE>
<DL>
<DD>Assigns a filter stream factory that will be used to filter any incoming
 or outgoing messages. The filters will be placed between the MSL message
 and MSL control, meaning they will see the actual MSL message data as it
 is being read from or written to the remote entity.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>factory</CODE> - filter stream factory. May be null.</DL>
</DD>
</DL>
<HR>

<A NAME="shutdown()"><!-- --></A><H3>
shutdown</H3>
<PRE>
public void <B>shutdown</B>()</PRE>
<DL>
<DD>Gracefully shutdown the MSL control instance. No additional messages may
 be processed. Any messages pending or in process will be completed.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="finalize()"><!-- --></A><H3>
finalize</H3>
<PRE>
protected void <B>finalize</B>()
                 throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</A></PRE>
<DL>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A></CODE> in class <CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getNewestMasterToken(com.netflix.msl.util.MslContext)"><!-- --></A><H3>
getNewestMasterToken</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A> <B>getNewestMasterToken</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx)
                                  throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD><p>Returns the newest master token from the MSL store and acquires the
 master token's read lock.</p>
 
 <p>When the caller no longer requires the master token or its crypto
 context to exist (i.e. it does not expect to receive a response that
 uses the same master token) then it must release the lock.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.
<DT><B>Returns:</B><DD>the newest master token or null if there is none.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to acquire the master token's read lock.<DT><B>See Also:</B><DD><A HREF="../../../../com/netflix/msl/msg/MslControl.html#releaseMasterToken(com.netflix.msl.tokens.MasterToken)"><CODE>releaseMasterToken(MasterToken)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="deleteMasterToken(com.netflix.msl.util.MslContext, com.netflix.msl.tokens.MasterToken)"><!-- --></A><H3>
deleteMasterToken</H3>
<PRE>
private void <B>deleteMasterToken</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                               <A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&nbsp;masterToken)
                        throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD>Deletes the provided master token from the MSL store. Doing so requires
 acquiring the master token's write lock.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>masterToken</CODE> - master token to delete. May be null.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to acquire the master token's write lock.</DL>
</DD>
</DL>
<HR>

<A NAME="releaseMasterToken(com.netflix.msl.tokens.MasterToken)"><!-- --></A><H3>
releaseMasterToken</H3>
<PRE>
private void <B>releaseMasterToken</B>(<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&nbsp;masterToken)</PRE>
<DL>
<DD>Release the read lock of the provided master token. If no master token
 is provided then this method is a no-op.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>masterToken</CODE> - the master token. May be null.<DT><B>See Also:</B><DD><A HREF="../../../../com/netflix/msl/msg/MslControl.html#getNewestMasterToken(com.netflix.msl.util.MslContext)"><CODE>getNewestMasterToken(MslContext)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="updateCryptoContexts(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageHeader, com.netflix.msl.keyx.KeyExchangeFactory.KeyExchangeData)"><!-- --></A><H3>
updateCryptoContexts</H3>
<PRE>
private void <B>updateCryptoContexts</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                  <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;messageHeader,
                                  <A HREF="../../../../com/netflix/msl/keyx/KeyExchangeFactory.KeyExchangeData.html" title="class in com.netflix.msl.keyx">KeyExchangeFactory.KeyExchangeData</A>&nbsp;keyExchangeData)
                           throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD>Update the MSL store crypto contexts with the crypto contexts of the
 message being sent. Only crypto contexts for master tokens used by the
 local entity for message authentication are saved.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>messageHeader</CODE> - outgoing message header.<DD><CODE>keyExchangeData</CODE> - outgoing message key exchange data.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to delete an old master token.</DL>
</DD>
</DL>
<HR>

<A NAME="updateCryptoContexts(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageHeader, com.netflix.msl.msg.MessageInputStream)"><!-- --></A><H3>
updateCryptoContexts</H3>
<PRE>
private void <B>updateCryptoContexts</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                  <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;request,
                                  <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;response)
                           throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD>Update the MSL store crypto contexts with the crypto contexts provided
 by received message.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>request</CODE> - previous message the response was received for.<DD><CODE>response</CODE> - received message input stream.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to delete an old master token.</DL>
</DD>
</DL>
<HR>

<A NAME="storeServiceTokens(com.netflix.msl.util.MslContext, com.netflix.msl.tokens.MasterToken, com.netflix.msl.tokens.UserIdToken, java.util.Set)"><!-- --></A><H3>
storeServiceTokens</H3>
<PRE>
private static void <B>storeServiceTokens</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                       <A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&nbsp;masterToken,
                                       <A HREF="../../../../com/netflix/msl/tokens/UserIdToken.html" title="class in com.netflix.msl.tokens">UserIdToken</A>&nbsp;userIdToken,
                                       <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/ServiceToken.html" title="class in com.netflix.msl.tokens">ServiceToken</A>&gt;&nbsp;serviceTokens)
                                throws <A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></PRE>
<DL>
<DD>Update the MSL store by removing any service tokens marked for deletion
 and adding/replacing any other service tokens contained in the message
 header.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>masterToken</CODE> - master for the service tokens.<DD><CODE>userIdToken</CODE> - user ID token for the service tokens.<DD><CODE>serviceTokens</CODE> - the service tokens to update.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></CODE> - if a token cannot be removed because of a master
         token or user ID token mismatch.</DL>
</DD>
</DL>
<HR>

<A NAME="buildRequest(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext)"><!-- --></A><H3>
buildRequest</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A> <B>buildRequest</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                    <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx)
                             throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD><p>Create a new message builder that will craft a new message.</p>
 
 <p>If a master token is available it will be used to build the new
 message and its read lock will be acquired. The caller must release the
 read lock after it has either received a response to the built request
 or after sending the message if no response is expected.</p>
 
 <p>If a master token is available and a user ID is provided by the
 message context the user ID token for that user ID will be used to build
 the message if the user ID token is bound to the master token.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.
<DT><B>Returns:</B><DD>the message builder.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to acquire the master token's read lock.</DL>
</DD>
</DL>
<HR>

<A NAME="buildResponse(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, com.netflix.msl.msg.MessageHeader)"><!-- --></A><H3>
buildResponse</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A> <B>buildResponse</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                     <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                     <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;request)
                              throws <A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A>,
                                     <A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A>,
                                     <A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A>,
                                     <A HREF="../../../../com/netflix/msl/MslUserAuthException.html" title="class in com.netflix.msl">MslUserAuthException</A>,
                                     <A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A>,
                                     <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD><p>Create a new message builder that will craft a new message in
 response to another message. The constructed message may be used as a
 request.</p>
 
 <p>In peer-to-peer mode if the response does not have a primary master
 token and a master token is available then it will be used to build the
 new message and its read lock will be acquired. The caller must release
 the read lock after it has either received a response to the built
 request or after sending the message if no response is expected.</p>
 
 <p>In peer-to-peer mode if a master token is being used to build the new
 message but there is no user ID token set or the user ID token is not
 bound to the and a user ID is provided by the message context the user
 ID token for that user ID will be used to build the message if the user
 ID token is bound to the master token.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>request</CODE> - message header to respond to.
<DT><B>Returns:</B><DD>the message builder.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A></CODE> - if the provided message's master token
         is not trusted.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A></CODE> - if the crypto context from a key exchange
         cannot be created.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A></CODE> - if there is an error with the key
         request data or the key response data cannot be created.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslUserAuthException.html" title="class in com.netflix.msl">MslUserAuthException</A></CODE> - if there is an error with the user
         authentication data or the user ID token cannot be created.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></CODE> - if a user ID token in the message header is not
         bound to its corresponding master token.
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to acquire the master token's read lock. (Only applicable in
         peer-to-peer mode.)</DL>
</DD>
</DL>
<HR>

<A NAME="buildErrorResponse(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, com.netflix.msl.msg.MslControl.SendResult, com.netflix.msl.msg.ErrorHeader)"><!-- --></A><H3>
buildErrorResponse</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/msg/MslControl.ErrorResult.html" title="class in com.netflix.msl.msg">MslControl.ErrorResult</A> <B>buildErrorResponse</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                                  <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                                  <A HREF="../../../../com/netflix/msl/msg/MslControl.SendResult.html" title="class in com.netflix.msl.msg">MslControl.SendResult</A>&nbsp;sent,
                                                  <A HREF="../../../../com/netflix/msl/msg/ErrorHeader.html" title="class in com.netflix.msl.msg">ErrorHeader</A>&nbsp;errorHeader)
                                           throws <A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A>,
                                                  <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD>Creates a message builder and message context appropriate for re-sending
 the original message in response to the received error.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>sent</CODE> - result of original sent message.<DD><CODE>errorHeader</CODE> - received error header.
<DT><B>Returns:</B><DD>the message builder and message context that should be used to
         re-send the original request in response to the received error
         or null if the error cannot be handled (i.e. should be returned
         to the application).
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></CODE> - if there is an error creating the message.
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to acquire the master token lock (user re-authentication only).</DL>
</DD>
</DL>
<HR>

<A NAME="cleanupContext(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageHeader, com.netflix.msl.msg.ErrorHeader)"><!-- --></A><H3>
cleanupContext</H3>
<PRE>
private void <B>cleanupContext</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                            <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;requestHeader,
                            <A HREF="../../../../com/netflix/msl/msg/ErrorHeader.html" title="class in com.netflix.msl.msg">ErrorHeader</A>&nbsp;errorHeader)
                     throws <A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A>,
                            <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD>Called after successfully handling an error message to delete the old
 invalid crypto contexts and bound service tokens associated with the
 invalid master token or user ID token.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>requestHeader</CODE> - initial request that generated the error.<DD><CODE>errorHeader</CODE> - error response received and successfully handled.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></CODE> - if the user ID token is not bound to the master
         token. (This should not happen.)
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to delete the old master token.</DL>
</DD>
</DL>
<HR>

<A NAME="send(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.OutputStream, com.netflix.msl.msg.MessageBuilder, boolean)"><!-- --></A><H3>
send</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/msg/MslControl.SendResult.html" title="class in com.netflix.msl.msg">MslControl.SendResult</A> <B>send</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                   <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
                                   <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A>&nbsp;builder,
                                   boolean&nbsp;closeDestination)
                            throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslMessageException.html" title="class in com.netflix.msl">MslMessageException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslEncodingException.html" title="class in com.netflix.msl">MslEncodingException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslEntityAuthException.html" title="class in com.netflix.msl">MslEntityAuthException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A>,
                                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD><p>Send a message. The message context will be used to build the message.
 If the message will be sent then the stored master token crypto contexts
 and service tokens will be updated just prior to sending.</p>
 
 <p>If the application data must be encrypted but the message does not
 support payload encryption then a handshake message will be sent. This
 will be indicated by the returned result.</p>
 
 <p>N.B. The message builder must be set renewable and non-replayable
 before calling this method. If the application data must be delayed then
 this specific message will be sent replayable regardless of the builder
 non-replayable value.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>out</CODE> - remote entity output stream.<DD><CODE>builder</CODE> - message builder.<DD><CODE>closeDestination</CODE> - true if the remote entity output stream must
        be closed when the constructed message output stream is closed.
<DT><B>Returns:</B><DD>a result containing the sent message header and a copy of the
         application data.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - if there is an error writing the message.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMessageException.html" title="class in com.netflix.msl">MslMessageException</A></CODE> - if there is an error building the request.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslEncodingException.html" title="class in com.netflix.msl">MslEncodingException</A></CODE> - if there is an error encoding the JSON
         data.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A></CODE> - if there is an error encrypting or signing
         the message.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A></CODE> - if the header master token is not
         trusted and needs to be to accept this message header.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslEntityAuthException.html" title="class in com.netflix.msl">MslEntityAuthException</A></CODE> - if there is an error with the entity
         authentication data.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A></CODE> - if there is an error generating the key
         request data.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></CODE> - if there was an error updating the service tokens
         or building the message header.
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to delete an old master token the sent message is replacing.</DL>
</DD>
</DL>
<HR>

<A NAME="receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, com.netflix.msl.msg.MessageHeader)"><!-- --></A><H3>
receive</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A> <B>receive</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                   <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
                                   <A HREF="../../../../com/netflix/msl/msg/MessageHeader.html" title="class in com.netflix.msl.msg">MessageHeader</A>&nbsp;request)
                            throws <A HREF="../../../../com/netflix/msl/MslEncodingException.html" title="class in com.netflix.msl">MslEncodingException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslEntityAuthException.html" title="class in com.netflix.msl">MslEntityAuthException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslUserAuthException.html" title="class in com.netflix.msl">MslUserAuthException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslMessageException.html" title="class in com.netflix.msl">MslMessageException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A>,
                                   <A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A>,
                                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD><p>Receive a message.</p>
 
 <p>If a message is received the stored master tokens, crypto contexts,
 user ID tokens, and service tokens will be updated.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>in</CODE> - remote entity input stream.<DD><CODE>request</CODE> - message header of the previously sent message, if any,
        the received message is responding to. May be null.
<DT><B>Returns:</B><DD>the received message.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../com/netflix/msl/MslEncodingException.html" title="class in com.netflix.msl">MslEncodingException</A></CODE> - if there is an error parsing the message.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A></CODE> - if there is an error decrypting or verifying
         the header or creating the message payload crypto context.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslEntityAuthException.html" title="class in com.netflix.msl">MslEntityAuthException</A></CODE> - if unable to create the entity
         authentication data.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslUserAuthException.html" title="class in com.netflix.msl">MslUserAuthException</A></CODE> - if unable to create the user authentication
         data.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMessageException.html" title="class in com.netflix.msl">MslMessageException</A></CODE> - if the message master token is expired and
         the message is not renewable.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A></CODE> - if the master token is not trusted and
         needs to be.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A></CODE> - if there is an error with the key
         request data or key response data or the key exchange scheme is
         not supported.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMessageException.html" title="class in com.netflix.msl">MslMessageException</A></CODE> - if the message master token is expired and
         the message is not renewable.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></CODE> - if the message does not contain an entity
         authentication data or a master token, or a token is improperly
         bound to another token, or there is an error updating the
         service tokens.
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to delete an old master token the received message is replacing.</DL>
</DD>
</DL>
<HR>

<A NAME="sendReceive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, com.netflix.msl.msg.MessageBuilder, boolean, boolean, int)"><!-- --></A><H3>
sendReceive</H3>
<PRE>
private <A HREF="../../../../com/netflix/msl/msg/MslControl.SendReceiveResult.html" title="class in com.netflix.msl.msg">MslControl.SendReceiveResult</A> <B>sendReceive</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                                 <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                                 <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
                                                 <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
                                                 <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A>&nbsp;builder,
                                                 boolean&nbsp;receive,
                                                 boolean&nbsp;closeStreams,
                                                 int&nbsp;timeout)
                                          throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslEncodingException.html" title="class in com.netflix.msl">MslEncodingException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslEntityAuthException.html" title="class in com.netflix.msl">MslEntityAuthException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslUserAuthException.html" title="class in com.netflix.msl">MslUserAuthException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslMessageException.html" title="class in com.netflix.msl">MslMessageException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A>,
                                                 <A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A>,
                                                 <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD><p>Send the provided request and optionally receive a response from the
 remote entity. The method will attempt to receive a response if one of
 the following is met:
 <ul>
 <li>the caller indicates a response is expected</li>
 <li>a handshake message was sent</li>
 <li>key request data appears in the request</li>
 <li>a renewable message with user authentication data was sent</li>
 </ul></p>
 
 <p>This method is only used from trusted network clients and peer-to-
 peer entities.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>in</CODE> - remote entity input stream.<DD><CODE>out</CODE> - remote entity output stream.<DD><CODE>builder</CODE> - request message builder.<DD><CODE>receive</CODE> - if a response is expected.<DD><CODE>closeStreams</CODE> - true if the remote entity input and output streams
        must be closed when the constructed message input and output
        streams are closed.<DD><CODE>timeout</CODE> - renewal lock acquisition timeout in milliseconds.
<DT><B>Returns:</B><DD>the received message or <code>null</code> if cancelled or interrupted.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - if there was an error reading or writing a
         message.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslEncodingException.html" title="class in com.netflix.msl">MslEncodingException</A></CODE> - if there is an error parsing or encoding a
         message.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslCryptoException.html" title="class in com.netflix.msl">MslCryptoException</A></CODE> - if there is an error encrypting/decrypting or
         signing/verifying a message header or creating the message
         payload crypto context.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslEntityAuthException.html" title="class in com.netflix.msl">MslEntityAuthException</A></CODE> - if there is an error with the entity
         authentication data.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslUserAuthException.html" title="class in com.netflix.msl">MslUserAuthException</A></CODE> - if unable to create the user authentication
         data.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMasterTokenException.html" title="class in com.netflix.msl">MslMasterTokenException</A></CODE> - if the master token is not trusted and
         needs to be.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslKeyExchangeException.html" title="class in com.netflix.msl">MslKeyExchangeException</A></CODE> - if there is an error with the key
         request data or key response data or the key exchange scheme is
         not supported.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslMessageException.html" title="class in com.netflix.msl">MslMessageException</A></CODE> - if the message master token is expired and
         the message is not renewable, if there is an error building the
         request, or if the response message ID does not equal the
         expected value.
<DD><CODE><A HREF="../../../../com/netflix/msl/MslException.html" title="class in com.netflix.msl">MslException</A></CODE> - if the message does not contain an entity
         authentication data or a master token, or a token is improperly
         bound to another token, or there is an error updating the
         service tokens, or there was an error building the message
         header.
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if the thread is interrupted while trying
         to delete an old master token the received message is replacing.</DL>
</DD>
</DL>
<HR>

<A NAME="acquireRenewalLock(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.util.concurrent.BlockingQueue, com.netflix.msl.msg.MessageBuilder, long)"><!-- --></A><H3>
acquireRenewalLock</H3>
<PRE>
private boolean <B>acquireRenewalLock</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                   <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                   <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&gt;&nbsp;queue,
                                   <A HREF="../../../../com/netflix/msl/msg/MessageBuilder.html" title="class in com.netflix.msl.msg">MessageBuilder</A>&nbsp;builder,
                                   long&nbsp;timeout)
                            throws <A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></PRE>
<DL>
<DD><p>Attempt to acquire the renewal lock if the message will need it using
 the given blocking queue.</p>
 
 <p>If anti-replay is required then this method will block until the
 renewal lock is acquired.</p>
 
 <p>If the message has already been marked renewable then this method
 will block until the renewal lock is acquired or a renewing thread
 delivers a new master token to this builder.</p>
 
 <p>If encryption is required but the builder will not be able to encrypt
 the message payloads, or if integrity protection is required but the
 builder will not be able to integrity protect the message payloads, or
 if the builder's master token is expired, or if there is no user ID
 token but the message is associated with a user and the builder will not
 be able to encrypt and integrity protect the message header, then this
 method will block until the renewal lock is acquired or a renewing
 thread delivers a master token to this builder.</p>
 
 <p>If the message is requesting tokens in response but there is no
 master token, or there is no user ID token but the message is associated
 with a user, then this method will block until the renewal lock is
 acquired or a renewing thread delivers a master token to this builder
 and a user ID token is also available if the message is associated with
 a user.</p>
 
 <p>If there is no master token, or either the master token or the user
 ID token is renewable, or there is no user ID token but the message is
 associated with a user and the builder will be able to encrypt the
 message header then this method will attempt to acquire the renewal
 lock. If unable to do so, it returns null.</p>
 
 <p>If this method returns true, then the renewal lock must be released by
 calling <code>releaseRenewalLock()</code>.</p>
 
 <p>This method is only used from trusted network clients and peer-to-
 peer entities.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>queue</CODE> - caller's blocking queue.<DD><CODE>builder</CODE> - message builder for the message to be sent.<DD><CODE>timeout</CODE> - timeout in milliseconds for acquiring the renewal lock
        or receiving a master token.
<DT><B>Returns:</B><DD>true if the renewal lock was acquired, false if the builder's
         message is now capable of encryption or the renewal lock is not
         needed.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</A></CODE> - if interrupted while waiting to acquire
         a master token from a renewing thread.<DT><B>See Also:</B><DD><A HREF="../../../../com/netflix/msl/msg/MslControl.html#releaseRenewalLock(com.netflix.msl.util.MslContext, java.util.concurrent.BlockingQueue, com.netflix.msl.msg.MessageInputStream)"><CODE>releaseRenewalLock(MslContext, BlockingQueue, MessageInputStream)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="releaseRenewalLock(com.netflix.msl.util.MslContext, java.util.concurrent.BlockingQueue, com.netflix.msl.msg.MessageInputStream)"><!-- --></A><H3>
releaseRenewalLock</H3>
<PRE>
private void <B>releaseRenewalLock</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</A>&lt;<A HREF="../../../../com/netflix/msl/tokens/MasterToken.html" title="class in com.netflix.msl.tokens">MasterToken</A>&gt;&nbsp;queue,
                                <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;message)</PRE>
<DL>
<DD><p>Release the renewal lock.</p>
 
 <p>Delivers any received master token to the blocking queue. This may be
 a null value if an error message was received or if the received message
 does not contain a master token for the local entity.</p>
 
 <p>If no message was received a null master token will be delivered.</p>
 
 <p>This method is only used from trusted network clients and peer-to-
 peer entities.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>queue</CODE> - caller's blocking queue.<DD><CODE>message</CODE> - received message. May be null if no message was received.</DL>
</DD>
</DL>
<HR>

<A NAME="receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><!-- --></A><H3>
receive</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&gt; <B>receive</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                          <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                          <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
                                          <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
                                          int&nbsp;timeout)</PRE>
<DL>
<DD><p>Receive a request over the provided input stream.</p>
 
 <p>If there is an error with the message an error response will be sent
 over the provided output stream.</p>
 
 <p>This method should only be used by trusted network servers and peer-
 to-peer entities to receive a request initiated by the remote entity.
 The remote entity should have used
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#request(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.net.URL, int)"><CODE>request(MslContext, MessageContext, URL, int)</CODE></A>.<p>
 
 <p>The returned <code>Future</code> will return the received
 <code>MessageInputStream</code> on completion or <code>null</code> if a reply was
 automatically sent (for example in response to a handshake request) or
 if the operation was cancelled or interrupted. The returned message may
 be an error message if the maximum number of messages is hit without
 successfully receiving the final message. It may throw a
 <code>MslException</code>, <code>MslErrorResponseException</code>, or
 <code>IOException</code>.</p>
 
 <p>The remote entity input and output streams will not be closed in case
 the caller wishes to reuse them.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>in</CODE> - remote entity input stream.<DD><CODE>out</CODE> - remote entity output stream.<DD><CODE>timeout</CODE> - renewal acquisition lock timeout in milliseconds.
<DT><B>Returns:</B><DD>a future for the message.</DL>
</DD>
</DL>
<HR>

<A NAME="respond(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, com.netflix.msl.msg.MessageInputStream, int)"><!-- --></A><H3>
respond</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MslControl.MslChannel.html" title="class in com.netflix.msl.msg">MslControl.MslChannel</A>&gt; <B>respond</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                             <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                             <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
                                             <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
                                             <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;request,
                                             int&nbsp;timeout)</PRE>
<DL>
<DD><p>Send a response over the provided output stream.</p>
 
 <p>This method should only be used by trusted network servers and peer-
 to-peer entities after receiving a request via
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><CODE>receive(MslContext, MessageContext, InputStream, OutputStream, int)</CODE></A>.
 The remote entity should have used
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#request(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.net.URL, int)"><CODE>request(MslContext, MessageContext, URL, int)</CODE></A>.</p>
 
 <p>The returned <code>Future</code> will return a <code>MslChannel</code>
 containing the final <code>MessageOutputStream</code> that should be used to
 send any additional application data not already sent via
 <A HREF="../../../../com/netflix/msl/msg/MessageContext.html#write(com.netflix.msl.msg.MessageOutputStream)"><CODE>MessageContext.write(MessageOutputStream)</CODE></A> to the remote entity,
 and in peer-to-peer mode may also contain a <code>MessageInputStream</code>
 as described below.</p>
 
 <p>In peer-to-peer mode a new <code>MessageInputStream</code> may be returned
 which should be used in place of the previous <code>MessageInputStream</code>
 being responded to. This will only occur if the initial response sent
 could not include application data and was instead a handshake message.
 The new <code>MessageInputStream</code> will not include any application data
 already read off of the previous <code>MessageInputStream</code>; it will
 only contain new application data that is a continuation of the previous
 message's application data.</p>
 
 <p>The returned <code>Future</code> will return <code>null</code> if cancelled,
 interrupted, if an error response was received (peer-to-peer only)
 resulting in a failure to establish the communication channel, if the
 response could not be sent with encryption or integrity protection when
 required (trusted network-mode only), if a user cannot be attached to
 the response due to lack of a master token, or if the maximum number of
 messages is hit without sending the message. In these cases the remote
 entity's next message can be received by another call to
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><CODE>receive(MslContext, MessageContext, InputStream, OutputStream, int)</CODE></A>.</p>
 
 <p>It may throw a <code>MslException</code>,
 <code>MslErrorResponseException</code>, or <code>IOException</code>.</p>
 
 <p>The remote entity input and output streams will not be closed in case
 the caller wishes to reuse them.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>in</CODE> - remote entity input stream.<DD><CODE>out</CODE> - remote entity output stream.<DD><CODE>request</CODE> - message input stream to create the response for.<DD><CODE>timeout</CODE> - renewal lock acquisition timeout in milliseconds.
<DT><B>Returns:</B><DD>a future for the communication channel.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</A></CODE> - if the request message input stream is
         an error message.</DL>
</DD>
</DL>
<HR>

<A NAME="error(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, com.netflix.msl.msg.MslControl.ApplicationError, java.io.OutputStream, com.netflix.msl.msg.MessageInputStream)"><!-- --></A><H3>
error</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</A>&gt; <B>error</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                             <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                             <A HREF="../../../../com/netflix/msl/msg/MslControl.ApplicationError.html" title="enum in com.netflix.msl.msg">MslControl.ApplicationError</A>&nbsp;err,
                             <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
                             <A HREF="../../../../com/netflix/msl/msg/MessageInputStream.html" title="class in com.netflix.msl.msg">MessageInputStream</A>&nbsp;request)</PRE>
<DL>
<DD><p>Send an error response over the provided output stream. Any replies
 to the error response may be received by a subsequent call to
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><CODE>receive(MslContext, MessageContext, InputStream, OutputStream, int)</CODE></A>.</p>
 
 <p>This method should only be used by trusted network servers and peer-
 to-peer entities after receiving a request via
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><CODE>receive(MslContext, MessageContext, InputStream, OutputStream, int)</CODE></A>.
 The remote entity should have used
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#request(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.net.URL, int)"><CODE>request(MslContext, MessageContext, URL, int)</CODE></A>.</p>
 
 <p>The returned <code>Future</code> will return true on success or false if
 cancelled or interrupted. It may throw a <code>MslException</code> or
 <code>IOException</code>.</p>
 
 <p>The remote entity input and output streams will not be closed in case
 the caller wishes to reuse them.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>err</CODE> - error type.<DD><CODE>out</CODE> - remote entity output stream.<DD><CODE>request</CODE> - request input srtream to create the response for.
<DT><B>Returns:</B><DD>a future for the operation.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</A></CODE> - if the request message input stream is
         an error message.</DL>
</DD>
</DL>
<HR>

<A NAME="request(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.net.URL, int)"><!-- --></A><H3>
request</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MslControl.MslChannel.html" title="class in com.netflix.msl.msg">MslControl.MslChannel</A>&gt; <B>request</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                             <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                             <A HREF="http://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</A>&nbsp;remoteEntity,
                                             int&nbsp;timeout)</PRE>
<DL>
<DD><p>Send a request to the entity at the provided URL.</p>
 
 <p>This method should only be used by trusted network clients when
 initiating a new request. The remote entity should be using
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><CODE>receive(MslContext, MessageContext, InputStream, OutputStream, int)</CODE></A>
 and
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#respond(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, com.netflix.msl.msg.MessageInputStream, int)"><CODE>respond(MslContext, MessageContext, InputStream, OutputStream, MessageInputStream, int)</CODE></A>.</p>
 
 <p>The returned <code>Future</code> will return a <code>MslChannel</code>
 containing the final <code>MessageOutputStream</code> that should be used to
 send any additional application data not already sent via
 <A HREF="../../../../com/netflix/msl/msg/MessageContext.html#write(com.netflix.msl.msg.MessageOutputStream)"><CODE>MessageContext.write(MessageOutputStream)</CODE></A> and the
 <code>MessageInputStream</code> of the established MSL communication
 channel. If an error message was received then the MSL channel's message
 output stream will be <code>null</code>.</p>
 
 <p>The returned <code>Future</code> will return <code>null</code> if cancelled or
 interrupted. The returned message may be an error message if the maximum
 number of messages is hit without successfully sending the request and
 receiving the response. It may throw a <code>MslException</code> or
 <code>IOException</code>.</p>
 
 <p>The caller must close the returned message input stream and message
 outut stream.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>remoteEntity</CODE> - remote entity URL.<DD><CODE>timeout</CODE> - connect, read, and renewal lock acquisition timeout in
        milliseconds.
<DT><B>Returns:</B><DD>a future for the communication channel.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</A></CODE> - if used in peer-to-peer mode.</DL>
</DD>
</DL>
<HR>

<A NAME="request(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><!-- --></A><H3>
request</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</A>&lt;<A HREF="../../../../com/netflix/msl/msg/MslControl.MslChannel.html" title="class in com.netflix.msl.msg">MslControl.MslChannel</A>&gt; <B>request</B>(<A HREF="../../../../com/netflix/msl/util/MslContext.html" title="interface in com.netflix.msl.util">MslContext</A>&nbsp;ctx,
                                             <A HREF="../../../../com/netflix/msl/msg/MessageContext.html" title="interface in com.netflix.msl.msg">MessageContext</A>&nbsp;msgCtx,
                                             <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A>&nbsp;in,
                                             <A HREF="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A>&nbsp;out,
                                             int&nbsp;timeout)</PRE>
<DL>
<DD><p>Send a request to the remote entity over the provided output stream
 and receive a resposne over the provided input stream.</p>
 
 <p>This method should only be used by peer-to-peer entities when
 initiating a new request. The remote entity should be using
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#receive(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, int)"><CODE>receive(MslContext, MessageContext, InputStream, OutputStream, int)</CODE></A>
 and
 <A HREF="../../../../com/netflix/msl/msg/MslControl.html#respond(com.netflix.msl.util.MslContext, com.netflix.msl.msg.MessageContext, java.io.InputStream, java.io.OutputStream, com.netflix.msl.msg.MessageInputStream, int)"><CODE>respond(MslContext, MessageContext, InputStream, OutputStream, MessageInputStream, int)</CODE></A>.</p>
 
 <p>The returned <code>Future</code> will return a <code>MslChannel</code>
 containing the final <code>MessageOutputStream</code> that should be used to
 send any additional application data not already sent via
 <A HREF="../../../../com/netflix/msl/msg/MessageContext.html#write(com.netflix.msl.msg.MessageOutputStream)"><CODE>MessageContext.write(MessageOutputStream)</CODE></A> and the
 <code>MessageInputStream</code> of the established MSL communication
 channel. If an error message was received then the MSL channel's message
 output stream will be <code>null</code>.</p>
 
 <p>The returned <code>Future</code> will return <code>null</code> if cancelled or
 interrupted. The returned message may be an error message if the maximum
 number of messages is hit without successfully sending the request and
 receiving the response. It may throw a <code>MslException</code> or
 <code>IOException</code>.</p>
 
 <p>The caller must close the returned message input stream and message
 outut stream. The remote entity input and output streams will not be
 closed when the message input and output streams are closed, in case the
 caller wishes to reuse them.</p>
 
 TODO once Java supports the WebSocket protocol we can remove this method
 in favor of the one accepting a URL parameter. (Or is it the other way
 around?)
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ctx</CODE> - MSL context.<DD><CODE>msgCtx</CODE> - message context.<DD><CODE>in</CODE> - remote entity input stream.<DD><CODE>out</CODE> - remote entity output stream.<DD><CODE>timeout</CODE> - renewal lock acquisition timeout in milliseconds.
<DT><B>Returns:</B><DD>a future for the communication channel.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</A></CODE> - if used in trusted network mode.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MslControl.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
Message Security Layer (MSL)</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/netflix/msl/msg/MessageServiceTokenBuilder.html" title="class in com.netflix.msl.msg"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/netflix/msl/msg/MslControl.ApplicationError.html" title="enum in com.netflix.msl.msg"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/netflix/msl/msg/MslControl.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MslControl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2014 Netflix, Inc. All Rights Reserved.
</BODY>
</HTML>
